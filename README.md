# Recipe Portal with Dynamic Grocery Checklist and Recipe Management

## Overview

This web application allows users to search, add, and manage recipes. It features Google Login for secure access, dynamic recipe search with suggestions, a detailed view of recipes with grocery lists, the ability to select multiple dishes for a consolidated grocery checklist, and the functionality to add new recipes with ingredient lists generated by an LLM API. The application also includes a mechanism to import recipes from a CSV file into the MongoDB database.

## Tech Stack

* **Frontend:** React (with Tailwind CSS or your chosen framework)
* **Backend:** Node.js, Express
* **Database:** MongoDB

## Setup Instructions

1.  **Clone the repository:**
    ```bash
    git clone <repository_url>
    cd <project_directory>
    ```

2.  **Backend Setup:**
    ```bash
    cd backend
    npm install # or yarn install
    ```
    * **Environment Variables:** Create a `.env` file in the `backend` directory and configure the following:
        ```env
        MONGODB_URI=<your_mongodb_connection_string>
        GOOGLE_CLIENT_ID=<your_google_client_id>
        LLM_API_KEY=<your_llm_api_key> (e.g., OpenAI API key, Gemini API key)
        LLM_API_BASE_URL=<your_llm_api_base_url> (if applicable)
        PORT=5000 # or your preferred port
        ```
    * **Import CSV Data:** Run the script to import the CSV data into MongoDB (assuming you have a script named `import-csv.js`):
        ```bash
        node import-csv.js <path_to_your_recipes.csv>
        ```
    * **Start the backend server:**
        ```bash
        npm start # or yarn start
        ```

3.  **Frontend Setup:**
    ```bash
    cd ../frontend
    npm install # or yarn install
    ```
    * **Environment Variables:** Create a `.env.local` file in the `frontend` directory and configure the following:
        ```env
        REACT_APP_BACKEND_URL=http://localhost:5000 # or your backend URL
        REACT_APP_GOOGLE_CLIENT_ID=<your_google_client_id>
        ```
    * **Start the frontend application:**
        ```bash
        npm start # or yarn start
        ```

## API Endpoints (Backend - Node.js/Express)

This section details the API endpoints exposed by the backend server.

### Authentication

* **`POST /api/auth/google`**:
    * **Description:** Endpoint to handle Google Login. Accepts the Google ID token from the frontend.
    * **Request Body:**
        ```json
        {
          "tokenId": "<Google ID token>"
        }
        ```
    * **Response:**
        * **Success (200 OK):** Returns user information (e.g., `userId`, `name`, `email`).
        * **Error (401 Unauthorized):** If the Google token is invalid or authentication fails.

### Recipe Search

* **`GET /api/recipes/search?query=<partial_recipe_name>`**:
    * **Description:** Searches for recipes by name based on a partial match. Returns up to 5 suggestions.
    * **Query Parameter:**
        * `query`: The partial name of the recipe to search for.
    * **Response:**
        * **Success (200 OK):** Returns an array of recipe names matching the query (maximum 5).
        ```json
        [
          "Dal Palak",
          "Palak Paneer",
          "Aloo Palak"
          // ... up to 5 suggestions
        ]
        ```
        * **Success (204 No Content):** If no recipes match the query.
        * **Error (500 Internal Server Error):** For server-side errors.

* **`GET /api/recipes/:recipeId`**:
    * **Description:** Retrieves detailed information for a specific recipe by its ID.
    * **Path Parameter:**
        * `recipeId`: The unique ID of the recipe in the database.
    * **Response:**
        * **Success (200 OK):** Returns the detailed recipe object, including its name and ingredients (with quantities for 8 servings).
        ```json
        {
          "_id": "<recipeId>",
          "name": "Dal Palak",
          "ingredients": [
            { "name": "Lentils", "quantity": "2", "unit": "cups" },
            { "name": "Spinach", "quantity": "2", "unit": "bunches" },
            { "name": "Onion", "quantity": "1", "unit": "large" },
            // ... more ingredients
          ]
        }
        ```
        * **Error (404 Not Found):** If the recipe with the given ID is not found.
        * **Error (500 Internal Server Error):** For server-side errors.

### Grocery Checklist

* **`POST /api/grocery-checklist`**:
    * **Description:** Generates a consolidated grocery checklist for a list of selected recipe IDs.
    * **Request Body:** An array of recipe IDs.
        ```json
        {
          "recipeIds": ["<recipeId1>", "<recipeId2>", "<recipeId3>"]
        }
        ```
    * **Response:**
        * **Success (200 OK):** Returns a consolidated grocery checklist with ingredients summed up (where applicable).
        ```json
        [
          { "name": "Spinach", "totalQuantity": "3", "unit": "bunches" },
          { "name": "Potato", "totalQuantity": "4", "unit": "large" },
          { "name": "Onion", "totalQuantity": "2", "unit": "large" },
          // ... consolidated ingredients
        ]
        ```
        * **Error (400 Bad Request):** If the request body is invalid or contains invalid recipe IDs.
        * **Error (500 Internal Server Error):** For server-side errors.

### Adding New Recipes

* **`POST /api/recipes/add`**:
    * **Description:** Adds a new recipe to the database. This endpoint expects the recipe name and will use the LLM to generate the ingredient list.
    * **Request Body:**
        ```json
        {
          "name": "<new_recipe_name>"
        }
        ```
    * **Response:**
        * **Success (201 Created):** Returns the newly created recipe object (including the LLM-generated ingredients for 8 servings).
        ```json
        {
          "_id": "<newRecipeId>",
          "name": "<new_recipe_name>",
          "ingredients": [
            { "name": "Ingredient 1", "quantity": "X", "unit": "unit" },
            { "name": "Ingredient 2", "quantity": "Y", "unit": "unit" },
            // ... ingredients generated by LLM
          ]
        }
        ```
        * **Error (400 Bad Request):** If the recipe name is missing.
        * **Error (500 Internal Server Error):** If there's an error communicating with the LLM or saving to the database.

## Data Management

* **(Import CSV Data):** As mentioned in the setup instructions, run a separate script (`import-csv.js`) to seed the database. This is typically a one-time operation.

## Notes

* **Grocery Checklist Quantities:** The consolidated grocery checklist will attempt to sum up quantities for the same ingredients. For ingredients without clear units or those like spices where exact quantities might not be crucial, the checklist might show the ingredient name without a summed quantity or with a general indication (e.g., "Turmeric").
* **Recipe Quantities:** The ingredient quantities stored and retrieved for each individual recipe are for **8 servings**. You might need to consider how to handle different serving sizes in your frontend if required.

## Further Development

* User profiles and saved recipes.
* Editing and deleting existing recipes.
* More advanced search filters.
* Integration with other grocery services.